Installation of Specific Versions of Kubeadm
https://www.thetopsites.net/article/50447714.shtml
https://platform9.com/blog/kubernetes-upgrade-the-definitive-guide-to-do-it-yourself/
https://medium.com/@vivek_syngh/setup-a-single-node-kubernetes-cluster-on-ubuntu-16-04-6412373d837a
https://www.linuxtechi.com/install-configure-kubernetes-ubuntu-18-04-ubuntu-18-10/
https://www.gremlin.com/community/tutorials/how-to-create-a-kubernetes-cluster-on-ubuntu-16-04-with-kubeadm-and-weave-net/



apt-get install docker.io -y
apt-get install apt-transport-https curl -y
swapoff -a
pip install netaddr

curl -s https://packages.cloud.google.com/apt/doc/apt-key.gpg | apt-key add - && \
  echo "deb http://apt.kubernetes.io/ kubernetes-xenial main" | tee /etc/apt/sources.list.d/kubernetes.list && \
  sudo apt-get update -q
  
  
apt-get install  kubeadm=1.17.3-00 kubelet=1.17.3-00 kubectl=1.17.3-00


kubeadm init --apiserver-advertise-address=192.168.56.167 --pod-network-cidr=192.168.56.0/24
  
vim /lib/systemd/system/docker.service


ExecStart=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock --exec-opt native.cgroupdriver=systemd

:wq

systemctl daemon-reload
systemctl stop docker
systemctl start docker


/proc/sys/net/bridge/bridge-nf-call-iptables

1

kubectl taint nodes --all node-role.kubernetes.io/master-


kubectl apply -f https://docs.projectcalico.org/v3.0/getting-started/kubernetes/installation/hosted/kubeadm/1.7/calico.yaml


docker pull k8s.gcr.io/kube-proxy:v1.17.3

nameserver 8.8.8.8





apt update
apt-cache kubeadm

Upgrading control plane nodes
Upgrade the first control plane node 

apt-get update && apt-get install -y kubeadm=1.18.x-00
apt-get update && apt-get install -y kubeadm=1.18.x-00 && \
apt-mark hold kubeadm
-
# since apt-get version 1.1 you can also use the following method
apt-get update && \
apt-get install -y --allow-change-held-packages kubeadm=1.18.x-00

kubeadm version

kubectl drain <cp-node-name> --ignore-daemonsets

kubeadm upgrade plan

kubeadm upgrade apply v1.18.x

kubectl uncordon <cp-node-name>

kubeadm upgrade node
