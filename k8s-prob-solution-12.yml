ğ–ğ¡ğšğ­ ğ¡ğšğ©ğ©ğğ§ğ¬ ğ°ğ¡ğğ§ ğ°ğ ğ«ğ®ğ§ ğ¤ğ®ğ›ğğœğ­ğ¥ ğğğ¥ğğ­ğ ğ©ğ¨ğ ğœğ¨ğ¦ğ¦ğšğ§ğ? ğŸ¤” 

Let's break it down :
âœ… With 'kubectl delete pod' action, the pod record in etcd will be updated by the API Server with two different fields "ğ’…ğ’†ğ’ğ’†ğ’•ğ’Šğ’ğ’ğ‘»ğ’Šğ’ğ’†ğ’”ğ’•ğ’‚ğ’ğ’‘" and "ğ’…ğ’†ğ’ğ’†ğ’•ğ’Šğ’ğ’ğ‘®ğ’“ğ’‚ğ’„ğ’†ğ‘·ğ’†ğ’“ğ’Šğ’ğ’…ğ‘ºğ’†ğ’„ğ’ğ’ğ’…ğ’”"
âœ… The endpoint controller checks whether the pod has reached 'terminating state' 
âœ… Once the state is reached, it removes the endpoint of the pod from the associated services to prevent external traffic
âœ… The endpoint starts getting removed from ğŠğ®ğ›ğ-ğ©ğ«ğ¨ğ±ğ², ğˆğğ­ğšğ›ğ¥ğğ¬, ğˆğ§ğ ğ«ğğ¬ğ¬, ğ‚ğ¨ğ«ğğƒğğ’ and all other objects that hold endpoint information
âœ… ğŠğ®ğ›ğğ¥ğğ­ is notified of the pod being updated (Terminating). 
âœ… If the 'preStop' exists, the hook is executed, if not, the kubelet immediately sends a ğ’ğˆğ†ğ“ğ„ğ‘ğŒ signal to the main container
âœ… After waiting for a graceful shutdown period, which is determined by the terminationGracePeriodSeconds and by default is '30' seconds, the container is forcibly stopped.
âœ… Finally, the API Server removes the pod from ETCD completely.


ğ‘²ğ’–ğ’ƒğ’†ğ’ğ’†ğ’•, ğ‘ªğ’ğ’ğ’•ğ’‚ğ’Šğ’ğ’†ğ’“ ğ‘¹ğ’–ğ’ğ’•ğ’Šğ’ğ’† ğ’‚ğ’ğ’… ğ‘ªğ‘µğ‘° ğ‘·ğ’ğ’–ğ’ˆğ’Šğ’ğ’” - ğ’‰ğ’ğ’˜ ğ’•ğ’‰ğ’†ğ’š ğ’‚ğ’“ğ’† ğ’‚ğ’ğ’ ğ’”ğ’•ğ’Šğ’•ğ’„ğ’‰ğ’†ğ’… ğ’•ğ’ğ’ˆğ’†ğ’•ğ’‰ğ’†ğ’“ ğŸ¤” â˜¸ 

Cri plugin uses hashtag#containerd to manage the full hashtag#container lifecycle and all container images while 
managing hashtag#pod networking via hashtag#CNI

Let's understand what happens behind a pod creation :-
ğŸ‘‰ Kubelet calls the cri plugin, via the CRI runtime service API, to create a pod
ğŸ‘‰ CRI uses containerd internal to create and start a special pause container (the sandbox container) and put 
that container inside the podâ€™s cgroups and namespace 
ğŸ‘‰ CRI configures the podâ€™s network namespace using CNI
ğŸ‘‰ Kubelet subsequently calls the cri plugin, via the CRI image service API, to pull the application container image
ğŸ‘‰ CRI further uses containerd to pull the image if the image is not present on the node.
ğŸ‘‰ Kubelet then calls cri, via the CRI runtime service API, to create and start the application container inside 
the pod using the pulled container image
ğŸ‘‰ CRI finally uses containerd internal to create the application container, 
puts it inside the podâ€™s cgroups and namespace, then to start the 
podâ€™s new application container. 
ğŸ‘‰ After these steps, a pod and its corresponding application container is created and running.



What should I do If a hashtag#pod fails to pull the image? ğŸ¤” 

Here are some key hashtag#Kubernetes events to understand & act:
â¡ Failed to pull image "xxx": rpc error: code = Unknown desc = Error response from daemon: Get xxx: denied: You may not login yet
ğğ«ğ¨ğ›ğšğ›ğ¥ğ ğ‚ğšğ®ğ¬ğ - You have not logged in to the image repository
ğ•ğšğ¥ğ¢ğğšğ­ğ 
âœ… Whether ImagePullSecret is specified when you use kubectl to create a workload

â¡ Failed to pull image "nginx:v1.1": rpc error: code = Unknown desc = Error response from daemon: 
Get https://lnkd.in/gKbUxgPb: dial tcp: lookup registry-1.docker.io: no such host
ğğ«ğ¨ğ›ğšğ›ğ¥ğ ğ‚ğšğ®ğ¬ğ - The image address is incorrectly configured.
ğ•ğšğ¥ğ¢ğğšğ­ğ
âœ… Whether the Image address is correct when a third-party image is used
âœ… Whether the Secret is used is correct a third-party image is used

â¡ Failed to pull image "https://lnkd.in/gUGY4AWu": rpc error: code = Unknown desc = Error response from daemon: 
Get https://lnkd.in/gKbUxgPb: net/http: request canceled while waiting for connection (Client.Timeout exceeded while awaiting headers)
ğğ«ğ¨ğ›ğšğ›ğ¥ğ ğ‚ğšğ®ğ¬ğ - Failed to connect to the image repository due to the disconnected network.
ğ•ğšğ¥ğ¢ğğšğ­ğ
âœ… Validate network policies/firewall and connectivity to the image repository

â¡ Failed create pod sandbox: rpc error: code = Unknown desc = failed to create a sandbox for pod "nginx-6dc48bf8b6-l8xrw": 
Error response from daemon: mkdir xxxxx: no space left on device
ğğ«ğ¨ğ›ğšğ›ğ¥ğ ğ‚ğšğ®ğ¬ğ -  Disk space is insufficient
ğ•ğšğ¥ğ¢ğğšğ­ğ
âœ… Whether the node Disk Space is insufficient on worker nodes

â¡ Failed to pull image "xxx": rpc error: code = Unknown desc = error pulling image configuration: xxx x509: certificate signed by unknown authority
ğğ«ğ¨ğ›ğšğ›ğ¥ğ ğ‚ğšğ®ğ¬ğ - An unknown or insecure certificate is used by the third-party image repository from which the image is pulled
ğ•ğšğ¥ğ¢ğğšğ­ğ
âœ… Whether the remote image repository uses an unknown or insecure Certificate

â¡ Failed to pull image "xxx": rpc error: code = Unknown desc = error pulling image configuration: xxx x509: certificate signed by unknown authority
ğğ«ğ¨ğ›ğšğ›ğ¥ğ ğ‚ğšğ®ğ¬ğ - Image size is too large.
ğ•ğšğ¥ğ¢ğğšğ­ğ
âœ… Whether the image size Is too large
