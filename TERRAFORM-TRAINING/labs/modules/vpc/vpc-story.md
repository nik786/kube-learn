

рж░рзЛрж╣рж┐ржд рж╢рж░рзНржорж╛рж░ Terraform рж░рж╛ржЬрзНржп (рж╕ржХрж▓ ржЪрж░рж┐рждрзНрж░ рж╕рж╣)

ржПржХржжрж┐ржи рж░рзЛрж╣рж┐ржд рж╢рж░рзНржорж╛ ржирж┐ржЬрзЗрж░ ржЬржирзНржп ржПржХ ржмрж┐рж╢рж╛рж▓ рж░рж╛ржЬрзНржп ржмрж╛ржирж╛рж▓рзЛред
рж░рж╛ржЬрзНржпрзЗрж░ ржирж╛ржо ржжрж┐рж▓ тАУ aws_vpc (VPC ржХржоржкрзНрж▓рзЗржХрзНрж╕)ред

ЁЯП░ VPC ржХржоржкрзНрж▓рзЗржХрзНрж╕

ржПржЗ ржХржоржкрзНрж▓рзЗржХрзНрж╕рзЗрж░ ржЪрж╛рж░ржкрж╛рж╢рзЗ ржмрж┐рж╢рж╛рж▓ ржПржХ CIDR Block ржжрзЗржпрж╝рж╛рж▓ ржЯрж╛ржирж╛ рж╣рж▓рзЛред
рж░рж╛ржЬрзНржпрзЗ рж╕ржХрзНрж░рж┐ржпрж╝ рж╣рж▓рзЛ тАУ

DNS Support

DNS Hostnames

Instance Tenancy

ЁЯПШя╕П ржжрзБржЗ ржкрж╛ржбрж╝рж╛: Public ржУ Private

рж░рзЛрж╣рж┐рждрзЗрж░ рж░рж╛ржЬрзНржпрзЗ ржжрзБржЗржЯрж╛ ржмржбрж╝ ржкрж╛ржбрж╝рж╛ рж╣рж▓рзЛ тАУ

aws_subnet Public Subnet

рж░рж╛ржЬрзНржпрзЗрж░ ржкрзВрж░рзНржм ржжрж┐ржХрзЗрж░ ржЦрзЛрж▓рж╛ ржкрж╛ржбрж╝рж╛ред

ржПржЦрж╛ржирзЗ for_each loop ржжрж┐ржпрж╝рзЗ ржЕржирзЗржХ ржШрж░ ржмрж╛ржирж╛ржирзЛ ржпрж╛ржпрж╝ред

ржкрзНрж░рждрж┐ржЯрж╛ ржШрж░рзЗрж░ ржЖрж▓рж╛ржжрж╛ vpc_id ржЖрж░ ржЫрзЛржЯ cidr_block ржерж╛ржХрзЗред

ржпрзЗрж╣рзЗрждрзБ ржПржЯрж┐ ржкрж╛ржмрж▓рж┐ржХ, рждрж╛ржЗ ржПржЦрж╛ржирзЗ ржжрж░ржЬрж╛ рж╕ржмрж╕ржоржпрж╝ ржЦрзЛрж▓рж╛ ржерж╛ржХрзЗ (Internet Access)ред

aws_subnet Private Subnet

ржПржЯрж┐ рж╣рж▓рзЛ ржЕржирзНржжрж░ржорж╣рж▓ тАУ рж╢рж╛ржирзНржд ржЖрж░ рж╕рзБрж░ржХрзНрж╖рж┐ржд ржкрж╛ржбрж╝рж╛ред

ржПржЦрж╛ржиржХрж╛рж░ ржШрж░ржЧрзБрж▓рзЛ ржмрж╛ржЗрж░рзЗрж░ рж▓рзЛржХрзЗрж░рж╛ ржжрзЗржЦрждрзЗ ржкрж╛ржпрж╝ ржирж╛ред

Private Subnet-ржПрж░ ржжрж░ржЬрж╛ рж╕ржмрж╕ржоржпрж╝ ржмржирзНржз ржерж╛ржХрзЗред

ржХрж┐ржирзНрждрзБ ржЕржирзНржжрж░ржорж╣рж▓рзЗрж░ ржорж╛ржирзБрж╖ржУ рждрзЛ ржХржЦржиржУ ржХржЦржиржУ ржмрж╛ржЗрж░рзЗрж░ ржЬрж┐ржирж┐рж╕ржкрждрзНрж░ ржЪрж╛ржпрж╝!

рждржЦржи рждрж╛рж░рж╛ ржПржХржЯрж╛ ржЧрзЛржкржи рж░рж╛рж╕рзНрждрж╛ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ тАУ рж╕рзЗржЯрж╛ржЗ рж╣рж▓рзЛ NAT Gatewayред

ЁЯМЙ NAT Gateway (ржЧрзЛржкржи рж╕рзЗрждрзБ)

ржЕржирзНржжрж░ржорж╣рж▓ ржерзЗржХрзЗ рж╕рж░рж╛рж╕рж░рж┐ ржмрж╛ржЗрж░рзЗрж░ рж░рж╛рж╕рзНрждрж╛ ржирзЗржЗред
рждрж╛ржЗ Public Subnet-ржПрж░ ржнрзЗрждрж░рзЗ ржПржХржЯрж╛ aws_nat_gateway ржмрж╛ржирж╛ржирзЛ рж╣рж▓рзЛред
ржПржЯрж╛ рж╣рж▓рзЛ ржПржХржзрж░ржирзЗрж░ ржЧрзЛржкржи рж╕рзЗрждрзБ, ржпрзЗржЯрж╛ ржжрж┐ржпрж╝рзЗ Private Subnet-ржПрж░ ржорж╛ржирзБрж╖рж░рж╛ ржмрж╛ржЗрж░рзЗ ржмрж╛рж░рзНрждрж╛ ржкрж╛ржарж╛рждрзЗ ржкрж╛рж░рзЗ,
ржХрж┐ржирзНрждрзБ ржмрж╛ржЗрж░рзЗрж░ ржорж╛ржирзБрж╖ рж╕рж░рж╛рж╕рж░рж┐ ржЕржирзНржжрж░ржорж╣рж▓рзЗ ржврзБржХрждрзЗ ржкрж╛рж░рзЗ ржирж╛ред

NAT Gateway ржмрж╕рж╛ржирзЛ рж╣рж▓рзЛ Public Subnet-ржПрж░ ржнрзЗрждрж░рзЗред

ржПрж░ рж╕рж╛ржерзЗ ржпрзБржХрзНржд рж╣рж▓рзЛ ржПржХржЯрж╛ Elastic IP тАУ ржпрзЗржи ржмрж╛ржЗрж░рзЗрж░ ржжрзБржирж┐ржпрж╝рж╛рж░ рж╕рж╛ржерзЗ ржпрзЛржЧрж╛ржпрзЛржЧ ржХрж░рждрзЗ ржкрж╛рж░рзЗред

ЁЯЫгя╕П Public Route (рж░рж╛ржЬржкрже)

Public Subnet-ржПрж░ ржорж╛ржирзБрж╖ржжрзЗрж░ ржмрж╛ржЗрж░рзЗ ржпрзЗрждрзЗ рж╣рж▓рзЗ рж░рж╛ржЬржкрже рж▓рж╛ржЧрзЗред
рж╕рзЗржЗ рж░рж╛ржЬржкрже Terraform ржП рж╣рж▓рзЛ тАУ aws_route Public Routeред

ржПржЗ рж░рж╛рж╕рзНрждрж╛ ржмрж╛ржирж╛рждрзЗ рж▓рж╛ржЧрзЗ тАУ

unique vpc_id

cidr_block (0.0.0.0/0) тАУ рж╕ржмрж╛рж░ ржЬржирзНржп ржЦрзЛрж▓рж╛ рж░рж╛рж╕рзНрждрж╛

gateway_id тАУ ржпрзЗржЯрж╛ aws_internet_gateway-ржПрж░ рж╕рж╛ржерзЗ ржпрзБржХрзНржд ржерж╛ржХрзЗред

ЁЯУЬ Route Tables (ржорж╛ржиржЪрж┐рждрзНрж░)

Public Route Table

Public Subnet-ржПрж░ ржШрж░ржЧрзБрж▓рзЛ ржПржЗ ржорж╛ржиржЪрж┐рждрзНрж░ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗред

ржПржЦрж╛ржирзЗ 0.0.0.0/0 рж░рж╛рж╕рзНрждрж╛ржЯрж╛ рж╕рж░рж╛рж╕рж░рж┐ Internet Gateway-рждрзЗ ржирж┐ржпрж╝рзЗ ржпрж╛ржпрж╝ред

Private Route Table

Private Subnet-ржПрж░ ржШрж░ржЧрзБрж▓рзЛ ржПржЗ ржорж╛ржиржЪрж┐рждрзНрж░ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗред

ржПржЦрж╛ржирзЗ 0.0.0.0/0 рж░рж╛рж╕рзНрждрж╛ржЯрж╛ рж╕рж░рж╛рж╕рж░рж┐ NAT Gateway-рждрзЗ ржирж┐ржпрж╝рзЗ ржпрж╛ржпрж╝ред

ржлрж▓рзЗ ржЕржирзНржжрж░ржорж╣рж▓ ржерзЗржХрзЗ ржмрж╛ржЗрж░рзЗрж░ ржжрзБржирж┐ржпрж╝рж╛ржпрж╝ ржмрж╛рж░рзНрждрж╛ ржпрж╛ржпрж╝,
ржХрж┐ржирзНрждрзБ ржмрж╛ржЗрж░рзЗрж░ ржХрзЗржЙ рж╕рж░рж╛рж╕рж░рж┐ ржЕржирзНржжрж░ржорж╣рж▓рзЗ ржврзБржХрждрзЗ ржкрж╛рж░рзЗ ржирж╛ред

ЁЯМР Internet Gateway (ржмрж┐рж╢рзНржм ржжрж░ржЬрж╛)

рж░рж╛ржЬрзНржпрзЗрж░ ржмрж┐рж╢рж╛рж▓ ржжрж░ржЬрж╛рж░ ржирж╛ржо рж╣рж▓рзЛ тАУ aws_internet_gatewayред
ржПржЯрж╛ржЗ Public Subnet-ржПрж░ рж▓рзЛржХржжрзЗрж░ ржмрж╛ржЗрж░рзЗрж░ ржжрзБржирж┐ржпрж╝рж╛рж░ рж╕рж╛ржерзЗ ржХржерж╛ ржмрж▓рж╛рж░ ржПржХржорж╛рждрзНрж░ ржкржеред
ржПрж░ ржЧрж╛ржпрж╝рзЗ ржЕржмрж╢рзНржпржЗ рж▓рзЗржЦрж╛ ржерж╛ржХрзЗ ржХрзЛржи vpc_id-рж░ ржЬржирзНржп ржПржЯрж┐ ржЦрзЛрж▓рж╛ред

ЁЯОЙ рж╕рж╛рж░рж╛ржВрж╢ (ржЪрж░рж┐рждрзНрж░ рждрж╛рж▓рж┐ржХрж╛)

рж░рж╛ржЬрж╛ тЖТ aws_vpc

ржЦрзЛрж▓рж╛ ржкрж╛ржбрж╝рж╛ тЖТ aws_subnet Public Subnet

ржЕржирзНржжрж░ржорж╣рж▓ тЖТ aws_subnet Private Subnet

ржмрж┐рж╢рзНржм ржжрж░ржЬрж╛ тЖТ aws_internet_gateway

рж░рж╛ржЬржкрже тЖТ aws_route

ржорж╛ржиржЪрж┐рждрзНрж░ тЖТ aws_route_table

ржкрж╛ржбрж╝рж╛-ржорж╛ржиржЪрж┐рждрзНрж░ ржпрзЛржЧрж╕рзВрждрзНрж░ тЖТ aws_route_table_association

ржЧрзЛржкржи рж╕рзЗрждрзБ тЖТ aws_nat_gateway

ржЪрж┐рж╣рзНржи (ржкрж╛рж╕ржкрзЛрж░рзНржЯ) тЖТ Elastic IP (aws_eip)
