

# ржХрж┐ржнрж╛ржмрзЗ рж╢рзВржирзНржп ржерзЗржХрзЗ Instagram рждрзИрж░рж┐ ржХрж░ржмрзЗржи?

Instagram ржжрзЗржЦрждрзЗ рж╕рж╣ржЬ ржоржирзЗ рж╣рж▓рзЗржУ, ржнрзЗрждрж░рзЗ ржПржЯрж┐ ржПржХржЯрж┐ ржЬржЯрж┐рж▓ рж╕рж┐рж╕рзНржЯрзЗржо ржпрж╛ рж▓ржХрзНрж╖ рж▓ржХрзНрж╖ ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА, ржЫржмрж┐ ржПржмржВ ржЗржирзНржЯрж╛рж░ржЕрзНржпрж╛ржХрж╢ржи рж╕рж╛ржорж▓рж╛рзЯред ржЖрж╕рзБржи ржжрзЗржЦрж┐, ржПржоржи ржПржХржЯрж┐ рж╕рж┐рж╕рзНржЯрзЗржо ржХрзАржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗред  

---

## ЁЯФ╣ ржлрж╛ржВрж╢ржирж╛рж▓ рж░рж┐ржХрзЛржпрж╝рж╛рж░ржорзЗржирзНржЯрж╕
- ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзАрж░рж╛ ржЫржмрж┐ ржУ ржнрж┐ржбрж┐ржУ ржЖржкрж▓рзЛржб ржПржмржВ ржжрзЗржЦрждрзЗ ржкрж╛рж░ржмрзЗржиред  
- рждрж╛рж░рж╛ рж▓рж╛ржЗржХ, ржХржорзЗржирзНржЯ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗржи ржПржмржВ рж╢рж┐рж░рзЛржирж╛ржо ржжрзНржмрж╛рж░рж╛ ржкрзЛрж╕рзНржЯ рж╕рж╛рж░рзНржЪ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗржиред  
- рждрж╛рж░рж╛ ржЕржирзНржпржжрзЗрж░ ржлрж▓рзЛ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗржи ржПржмржВ ржлрж▓рзЛ ржХрж░рж╛ ржЕрзНржпрж╛ржХрж╛ржЙржирзНржЯржЧрзБрж▓рж┐рж░ ржлрж┐ржб ржжрзЗржЦрждрзЗ ржкрж╛рж░ржмрзЗржиред  

ЁЯЪл ржирзЛржЯ: ржПржЗ рж╕рж┐рж╕рзНржЯрзЗржорзЗ ржорзЗрж╕рзЗржЬрж┐ржВ ржЕржирзНрждрж░рзНржнрзБржХрзНржд ржиржпрж╝ред  

---

## ЁЯФ╣ ржиржи-ржлрж╛ржВрж╢ржирж╛рж▓ рж░рж┐ржХрзЛржпрж╝рж╛рж░ржорзЗржирзНржЯрж╕
- рж╣рж╛ржЗ ржЕрзНржпрж╛ржнрзЗржЗрж▓рзЗржмрж┐рж▓рж┐ржЯрж┐ ржПржмржВ рж▓рзЛ рж▓рзЗржЯрзЗржирзНрж╕рж┐ ржПржХржЯрж┐ ржирж┐рж░ржмржЪрзНржЫрж┐ржирзНржи ржЕржнрж┐ржЬрзНржЮрждрж╛рж░ ржЬржирзНржп ржЬрж░рзБрж░рж┐ред  
- ржлрж┐ржбрзЗрж░ ржЬржирзНржп eventual consistency ржЧрзНрж░рж╣ржгржпрзЛржЧрзНржпред  
- ржбрж╛ржЯрж╛ рж▓рж╕ ржПржбрж╝рж╛рждрзЗ ржирж┐рж░рзНржнрж░ржпрзЛржЧрзНржп рж╕рзНржЯрзЛрж░рзЗржЬред  
- рж╕рж┐рж╕рзНржЯрзЗржоржХрзЗ рж╕рзНржХрзЗрж▓ржпрзЛржЧрзНржп рж╣рждрзЗ рж╣ржмрзЗ ржпрж╛рждрзЗ рж░рж┐ржб-рж╣рзЗржнрж┐ ржЯрзНрж░рж╛ржлрж┐ржХ ржПржмржВ рж╕рзЗрж▓рж┐ржмрзНрж░рж┐ржЯрж┐-рж▓рзЗржнрзЗрж▓рзЗрж░ ржнрж╛ржЗрж░рж╛рж▓рж┐ржЯрж┐ рж╕рж╛ржорж▓рж╛рждрзЗ ржкрж╛рж░рзЗ (ржпрзЗржоржи рззржЯрж┐ ржЫржмрж┐ рззM ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА ржжрзЗржЦржЫрзЗ)ред  

---

## ЁЯФ╣ ржЯрзНрж░рж╛ржлрж┐ржХ ржУ рж╕рзНржЯрзЛрж░рзЗржЬ рж╣рж┐рж╕рж╛ржм
- ржорзЛржЯ ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА: **500M**, ржжрзИржирж┐ржХ рж╕ржХрзНрж░рж┐ржпрж╝ ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА: **100M**  
- ржжрзИржирж┐ржХ ржЖржкрж▓рзЛржбрж╛рж░: **1M** тЖТ ~5M ржЖржкрж▓рзЛржб/ржжрж┐ржи (~57 ржЖржкрж▓рзЛржб/рж╕рзЗржХрзЗржирзНржб)  

ЁЯУ╖ **ржлржЯрзЛ:**  
- ржЧржбрж╝ рж╕рж╛ржЗржЬ: **200KB** тЖТ 1TB/ржжрж┐ржи тЖТ 350TB/ржмржЫрж░ (x3 рж░рж┐ржбрж╛ржиржбрзНржпрж╛ржирзНрж╕рж┐рж░ ржЬржирзНржп)  

ЁЯОе **ржнрж┐ржбрж┐ржУ:**  
- ржЧржбрж╝ рж╕рж╛ржЗржЬ: **50MB** тЖТ 50TB/ржжрж┐ржи  

---

## ЁЯФ╣ ржХрзЛрж░ рж╕рж┐рж╕рзНржЯрзЗржо ржХржорзНржкрзЛржирзЗржирзНржЯрж╕
- **ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржЕрзНржпрж╛ржкрж╕** (iOS/Android/Web)  
- **API Gateway** ржЕржерзЗржирзНржЯрж┐ржХрзЗрж╢ржи рж╣рзНржпрж╛ржирзНржбрзЗрж▓ ржХрж░рзЗ  
- **Load Balancer** ржЯрзНрж░рж╛ржлрж┐ржХ ржнрж╛ржЧ ржХрж░рзЗ  
- **Read/Write Servers** (ржкрзЛрж╕рзНржЯ, рж▓рж╛ржЗржХ, ржкрзНрж░рзЛржлрж╛ржЗрж▓рзЗрж░ ржЬржирзНржп)  
- **CDN (CloudFront)** ржжрзНрж░рзБржд ржорж┐ржбрж┐ржпрж╝рж╛ ржбрзЗрж▓рж┐ржнрж╛рж░рж┐рж░ ржЬржирзНржп  
- **Cache (Redis/Memcached)** рж▓рзЗржЯрзЗржирзНрж╕рж┐ ржХржорж╛рзЯ  
- **SNS + SQS** ржкрзЛрж╕рзНржЯ ржЗржнрзЗржирзНржЯ ржбрж┐рж╕рзНржЯрзНрж░рж┐ржмрж┐ржЙрж╢ржирзЗрж░ ржЬржирзНржп  
- **S3 / HDFS + Replicas** ржЫржмрж┐/ржнрж┐ржбрж┐ржУ рж╕рзНржЯрзЛрж░рзЗржЬ  
- **SQL/NoSQL** (MySQL = ржЗржЙржЬрж╛рж░, DynamoDB = ржорзЗржЯрж╛ржбрж╛ржЯрж╛)  
- **Push Notifications** ржЕржирж▓рж╛ржЗржи ржлрж▓рзЛржпрж╝рж╛рж░ржжрзЗрж░ ржЬрж╛ржирж╛рждрзЗ  

---

## ЁЯФ╣ ржоржбрзБрж▓рж╛рж░ рж╕рж╛рж░рзНржнрж┐рж╕рзЗрж╕
- **User Service** (Redis cache + MySQL fallback)  
- **Post Service** (ржкрзЛрж╕рзНржЯ рждрзИрж░рж┐, ржжрзЗржЦрж╛ ржУ ржорзНржпрж╛ржирзЗржЬ ржХрж░рж╛)  
- **Comment & Like Services**  
- **Feed Generator** (SQS + follower graph ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржЯрж╛ржЗржорж▓рж╛ржЗржи ржЖржкржбрзЗржЯ ржХрж░рзЗ)  
- **Follower Service**  
- **URL Shortener** (S3 URL ржЧрзБрж▓рзЛ ржХржоржкрзНржпрж╛ржХрзНржЯ ржЖржХрж╛рж░рзЗ рж╕ржВрж░ржХрзНрж╖ржгрзЗрж░ ржЬржирзНржп)  

---

## ЁЯФ╣ ржбрж╛ржЯрж╛ржмрзЗрж╕ ржЖрж░рзНржХрж┐ржЯрзЗржХржЪрж╛рж░
- 80% рж░рж┐ржб ржмржирж╛ржо 20% рж░рж╛ржЗржЯ = рж░рж┐ржб-ржЕржкрзНржЯрж┐ржорж╛ржЗржЬржб рж╕рж┐рж╕рзНржЯрзЗржо  
- **Object Storage (S3)** ржорж┐ржбрж┐ржпрж╝рж╛рж░ ржЬржирзНржп  
- **DynamoDB** ржорзЗржЯрж╛ржбрж╛ржЯрж╛рж░ ржЬржирзНржп  
- **MySQL** ржЗржЙржЬрж╛рж░ ржЗржиржлрзЛрж░ ржЬржирзНржп  
- **Redis** рж╕рзНржкрж┐ржбрзЗрж░ ржЬржирзНржп  
- **Sharding + 3x Replication** рж╕рзНржХрзЗрж▓ ржУ рж░рзЗржЬрж┐рж▓рж┐ржпрж╝рзЗржирзНрж╕рзЗрж░ ржЬржирзНржп  

---

## ЁЯФ╣ ржПржХрзНрж╕рж┐ржХрж┐ржЙрж╢ржи ржлрзНрж▓рзЛ  

### 1я╕ПтГг Synchronous Flow (ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА ржПржХржЯрж┐ ржкрзЛрж╕рзНржЯ ржЖржкрж▓рзЛржб ржХрж░рж▓рзЗ):  
- ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА рж▓ржЧржЗржи тЖТ Auth Server ржнрзЗрж░рж┐ржлрж╛ржЗ ржХрж░рзЗ тЖТ Write Server ржЖржкрж▓рзЛржб ржкрзНрж░ржХрзНрж░рж┐ржпрж╝рж╛ ржХрж░рзЗ  
- ржЫржмрж┐ S3-ржП ржкрж╛ржарж╛ржирзЛ рж╣ржпрж╝ тЖТ URL Shortener ржПржХржЯрж┐ рж╢рж░рзНржЯ рж▓рж┐ржЩрзНржХ рж░рж┐ржЯрж╛рж░рзНржи ржХрж░рзЗ  
- ржорзЗржЯрж╛ржбрж╛ржЯрж╛ рж╕рзНржЯрзЛрж░ рж╣ржпрж╝ тЖТ Feed Service SNS ржПрж░ ржорж╛ржзрзНржпржорзЗ ржирзЛржЯрж┐ржлрж╛ржЗ рж╣ржпрж╝  
- SQS ржорзЗрж╕рзЗржЬ ржбрж┐рж╕рзНржЯрзНрж░рж┐ржмрж┐ржЙржЯ ржХрж░рзЗ тЖТ Notification Server push alert ржкрж╛ржарж╛рзЯ  

### 2я╕ПтГг Asynchronous Flow (Feed Generation):  
- **рж╕рж╛ржзрж╛рж░ржг ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзАржжрзЗрж░ ржЬржирзНржп:** рж╕рж┐рж╕рзНржЯрзЗржо ржкрзНрж░рж┐-ржХржорзНржкрж┐ржЙржЯрзЗржб ржлрж┐ржб рждрзИрж░рж┐ ржХрж░рзЗ ржПржмржВ ржлрж▓рзЛржпрж╝рж╛рж░ржжрзЗрж░ ржжрж┐ржХрзЗ ржкрзБрж╢ ржХрж░рзЗред  
- **рж╕рзЗрж▓рж┐ржмрзНрж░рж┐ржЯрж┐ ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзАржжрзЗрж░ ржЬржирзНржп:** ржлрж▓рзЛржпрж╝рж╛рж░рж░рж╛ ржЕржи-ржбрж┐ржорж╛ржирзНржбрзЗ ржХржиржЯрзЗржирзНржЯ ржкрзБрж▓ ржХрж░рзЗ, ржХрж╛рж░ржг рж╕рзНржХрзЗрж▓рзЗржмрж┐рж▓рж┐ржЯрж┐ ржЗрж╕рзНржпрзБ ржерж╛ржХрждрзЗ ржкрж╛рж░рзЗред  

---
