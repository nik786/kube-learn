


| **Step**                                | **Description**                                                                                       | **Command/Tool**                                                                                 | **Expected Outcome**                                                                 |
|----------------------------------------|-------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------|
| 1. Check Node Registration             | Verify if the node is listed in the cluster                                                           | `kubectl get nodes`                                                                             | Worker node should appear in `Ready` state                                             |
| 2. Review EC2 Instance Logs            | SSH into the worker node and check kubelet logs                                                       | `journalctl -u kubelet` or `cat /var/log/messages`                                              | Logs should show successful communication with the control plane                      |
| 3. Validate IAM Role                   | Ensure worker node has correct IAM permissions for EKS                                                | Check IAM role attached to EC2 instance                                                         | Should have AmazonEKSWorkerNodePolicy, AmazonEC2ContainerRegistryReadOnly, etc.       |
| 4. Confirm Security Group Rules        | Ensure correct inbound/outbound rules                                                                 | EC2 console or Terraform config                                                                 | Port 443 (EKS API), 10250 (kubelet) open for worker-control plane communication        |
| 5. Check Bootstrap Script Logs         | Ensure `bootstrap.sh` executed successfully                                                           | `cat /var/log/cloud-init.log` and `cloud-init-output.log`                                       | Should show "Successfully joined the cluster" message                                  |
| 6. Verify Cluster Name Tag             | Check if correct `kubernetes.io/cluster/<cluster-name>` tag is on subnets and instances               | EC2 instance tags and Subnet tags                                                               | Must match actual cluster name                                                         |
| 7. Review Worker Node AMI              | Make sure AMI is EKS-optimized or custom with proper configuration                                    | Launch template or EC2 console                                                                  | Should match Amazon EKS optimized AMIs                                                 |
| 8. Check VPC and Subnet Configuration  | Ensure worker nodes are launched in correct VPC and subnets                                           | VPC/Subnet settings in console or IaC                                                           | Must be in same VPC as EKS control plane                                               |
| 9. Use `aws-auth` ConfigMap            | Ensure worker node role is added to the `aws-auth` ConfigMap                                          | `kubectl get configmap aws-auth -n kube-system -o yaml`                                         | Role ARN must be listed under `mapRoles`                                               |
| 10. Check Node Group Health            | For managed node groups, verify if the node group is in healthy state                                 | AWS Console or `aws eks describe-nodegroup`                                                     | Should show `ACTIVE` and healthy                                                       |
| 11. Reboot/Recreate Node               | Try restarting instance or recreating the node                                                        | EC2 console or Auto Scaling Group                                                               | Sometimes fixes temporary bootstrap/network issues                                     |
| 12. CloudWatch Logs & Metrics          | Look for system metrics or events during the join failure time                                        | CloudWatch Metrics/Logs                                                                         | Check for failed bootstrap, kubelet errors, or EC2 system failures                    |
